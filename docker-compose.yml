version: '3'

services:

  car_simulator:
    image: python-microservices-base
    depends_on: 
      - rabbitmq
    restart: always
    volumes:
      - ./car_simulator:/app

  db_saver:
    image: python-microservices-base
    depends_on:
      - rabbitmq
    restart: always
    volumes:
      - ./db_saver:/app

  query_service:
    image: python-microservices-base
    depends_on:
      - rabbitmq
    restart: always
    volumes:
      - ./query_service:/app
    ports:
      - 8000:80


  rabbitmq:
    image: rabbitmq:3-management
    ports:
      - 15672:15672

  mongo:
    image: mongo

  mongo-express:
    image: mongo-express
    ports:
      - 8081:8081
    links:
      - mongo
